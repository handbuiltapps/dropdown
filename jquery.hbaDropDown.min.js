(function(b){b.fn.hbaDropdown=function(f){var c=b.extend({},{promptClass:"hba-prompt",selectedClass:"hba-selected-item",onChange:null},f),e={init:function(a,c){var d="."+c.selectedClass;if("SELECT"!=a.tagName)return alert("The plugin must be used only with select element"),!1;if(b(a).closest(".hba-dd").length)return console.log("Element has already been initialized"),!1;d=b("<div/>",{"class":"hba-dd",style:"position: relative"});a.id&&d.attr("id",a.id+"hba_dd");b(a).wrap(d);b(a).css({opacity:0,position:"absolute",top:0,right:0,width:"100%",height:"100%"});d=b("<div/>",{"class":c.selectedClass,html:"<span></span>"});a.id&&d.attr("id",a.id+"hba_dd_selected");b(a).before(d);e.trigger.onChange(a);b(a).bind("change",function(a){e.trigger.onChange(this)})},trigger:{onChange:function(a){var e=b(a),d=e.closest(".hba-dd"),f=e.find("option:selected").text();selectedItem=d.find("."+c.selectedClass);selectedItem.find("span").text(f);""===e.val()?selectedItem.addClass(c.promptClass):selectedItem.removeClass(c.promptClass);if(b.isFunction(c.onChange))c.onChange(a,value,text)},destroy:function(a){b(a).unbind("change");b(a).prev().remove();b(a).parent().is("div.hba-dd")&&b(a).unwrap()}}};this.each(function(){e.init(this,c)});this.destroy=function(){e.trigger.destroy(this)};return this}})(jQuery);
